{"ast":null,"code":"import _slicedToArray from\"C:/Users/magma/Downloads/Lab 4/Lab-4/library-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import auth from\"../data/Auth\";import{useNavigate}from'react-router-dom';import AppBar from\"../components/AppBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LogInPage=function LogInPage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newUsername=_useState2[0],setNewUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newPwd=_useState4[0],setNewPwd=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var navigate=useNavigate();var handleLogIn=function handleLogIn(event){event.preventDefault();var newUser={username:newUsername,pwd:newPwd};fetch(\"/user/login\",{method:\"POST\",body:JSON.stringify(newUser),headers:{'Content-Type':'application/json'}}).then(function(response){if(response.ok){auth.userLogin(newUsername);navigate('/search');}else if(response.status==404){setError(\"Niepoprawny login lub hasło!\");}else{setError(\"Wystąpił nieoczekiwany błąd.\");}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AppBar,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"LogIn\"}),error!=\"\"?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning alert-dismissible fade show\",role:\"alert\",children:error}):null,/*#__PURE__*/_jsx(\"div\",{className:\"form-control form-control-sm\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogIn,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"user\",required:true,className:\"form-control\",onChange:function onChange(e){setNewUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"user\",children:\"Username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pwd\",required:true,className:\"form-control\",onChange:function onChange(e){setNewPwd(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"pwd\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block mb-4\",children:\"Log in\"})]})})]});};export default LogInPage;","map":{"version":3,"names":["React","useState","auth","useNavigate","AppBar","LogInPage","newUsername","setNewUsername","newPwd","setNewPwd","error","setError","navigate","handleLogIn","event","preventDefault","newUser","username","pwd","fetch","method","body","JSON","stringify","headers","then","response","ok","userLogin","status","e","target","value"],"sources":["C:/Users/magma/Downloads/Lab 4/Lab-4/library-fe/src/pages/LogInPage.tsx"],"sourcesContent":["import React, {useState} from 'react'\r\nimport {userDTO} from \"../data/userDTO\";\r\nimport auth from \"../data/Auth\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AppBar from \"../components/AppBar\";\r\n\r\n\r\n\r\nconst LogInPage = () => {\r\n    const [newUsername, setNewUsername] = useState(\"\");\r\n    const [newPwd, setNewPwd] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogIn = (event: React.FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n\r\n        const newUser: userDTO = {\r\n            username: newUsername,\r\n            pwd: newPwd\r\n        }\r\n\r\n        fetch(\"/user/login\",\r\n            {method: \"POST\", body: JSON.stringify(newUser), headers: {'Content-Type': 'application/json'}})\r\n            .then(response => {\r\n                if(response.ok){\r\n                    auth.userLogin(newUsername);\r\n                    navigate('/search');\r\n                } else if (response.status == 404){\r\n                    setError(\"Niepoprawny login lub hasło!\")\r\n                } else {\r\n                    setError(\"Wystąpił nieoczekiwany błąd.\")\r\n                }\r\n            })\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <AppBar />\r\n            <h1>LogIn</h1>\r\n\r\n            {error != \"\" ?\r\n                <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\r\n                    {error}\r\n                </div> : null\r\n            }\r\n\r\n            <div className=\"form-control form-control-sm\">\r\n\r\n                <form onSubmit={handleLogIn}>\r\n                    <div className=\"form-outline mb-4\">\r\n                        <input type=\"text\" name=\"user\" required\r\n                               className=\"form-control\"\r\n                               onChange={(e) => {\r\n                                   setNewUsername(e.target.value)\r\n                               }}/>\r\n                        <label className=\"form-label\" htmlFor=\"user\">Username</label>\r\n                    </div>\r\n\r\n                    <div className=\"form-outline mb-4\">\r\n                        <input type=\"password\" name=\"pwd\" required\r\n                               className=\"form-control\"\r\n                               onChange={(e) => {\r\n                                   setNewPwd(e.target.value)\r\n                               }}/>\r\n                        <label className=\"form-label\" htmlFor=\"pwd\">Password</label>\r\n                    </div>\r\n\r\n                    <button type=\"submit\" className=\"btn btn-primary btn-block mb-4\">Log in</button>\r\n\r\n                </form>\r\n            </div>\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default LogInPage"],"mappings":"qIAAA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CAErC,MAAOC,KAAI,KAAM,cAAc,CAC/B,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,OAAM,KAAM,sBAAsB,CAAC,6IAI1C,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACpB,cAAsCJ,QAAQ,CAAC,EAAE,CAAC,wCAA3CK,WAAW,eAAEC,cAAc,eAClC,eAA4BN,QAAQ,CAAC,EAAE,CAAC,yCAAjCO,MAAM,eAAEC,SAAS,eACxB,eAA0BR,QAAQ,CAAC,EAAE,CAAC,yCAA/BS,KAAK,eAAEC,QAAQ,eACtB,GAAMC,SAAQ,CAAGT,WAAW,EAAE,CAE9B,GAAMU,YAAW,CAAG,QAAdA,YAAW,CAAIC,KAAuC,CAAK,CAC7DA,KAAK,CAACC,cAAc,EAAE,CAEtB,GAAMC,QAAgB,CAAG,CACrBC,QAAQ,CAAEX,WAAW,CACrBY,GAAG,CAAEV,MACT,CAAC,CAEDW,KAAK,CAAC,aAAa,CACf,CAACC,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,OAAO,CAAC,CAAEQ,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAAC,CAAC,CAC9FC,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,EAAE,CAAC,CACXzB,IAAI,CAAC0B,SAAS,CAACtB,WAAW,CAAC,CAC3BM,QAAQ,CAAC,SAAS,CAAC,CACvB,CAAC,IAAM,IAAIc,QAAQ,CAACG,MAAM,EAAI,GAAG,CAAC,CAC9BlB,QAAQ,CAAC,8BAA8B,CAAC,CAC5C,CAAC,IAAM,CACHA,QAAQ,CAAC,8BAA8B,CAAC,CAC5C,CACJ,CAAC,CAAC,CACV,CAAC,CAED,mBACI,wCACI,KAAC,MAAM,IAAG,cACV,oBAAI,OAAK,EAAK,CAEbD,KAAK,EAAI,EAAE,cACR,YAAK,SAAS,CAAC,iDAAiD,CAAC,IAAI,CAAC,OAAO,UACxEA,KAAK,EACJ,CAAG,IAAI,cAGjB,YAAK,SAAS,CAAC,8BAA8B,uBAEzC,cAAM,QAAQ,CAAEG,WAAY,wBACxB,aAAK,SAAS,CAAC,mBAAmB,wBAC9B,cAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,MAChC,SAAS,CAAC,cAAc,CACxB,QAAQ,CAAE,kBAACiB,CAAC,CAAK,CACbvB,cAAc,CAACuB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAClC,CAAE,EAAE,cACX,cAAO,SAAS,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,UAAC,UAAQ,EAAQ,GAC3D,cAEN,aAAK,SAAS,CAAC,mBAAmB,wBAC9B,cAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,MACnC,SAAS,CAAC,cAAc,CACxB,QAAQ,CAAE,kBAACF,CAAC,CAAK,CACbrB,SAAS,CAACqB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7B,CAAE,EAAE,cACX,cAAO,SAAS,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,UAAC,UAAQ,EAAQ,GAC1D,cAEN,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,gCAAgC,UAAC,QAAM,EAAS,GAE7E,EACL,GACP,CAGX,CAAC,CAED,cAAe3B,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}