{"ast":null,"code":"import _slicedToArray from\"C:/Users/magma/Downloads/Lab 4/Lab-4/library-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import AppBar from\"../components/AppBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SignInPage=function SignInPage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newUsername=_useState2[0],setNewUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newPwd=_useState4[0],setNewPwd=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var navigate=useNavigate();var handleSignIn=function handleSignIn(event){event.preventDefault();var newUser={username:newUsername,pwd:newPwd};fetch(\"/user/registration\",{method:\"POST\",body:JSON.stringify(newUser),headers:{'Content-Type':'application/json'}}).then(function(response){if(response.ok){navigate('/login');}else if(response.status==400){setError(\"Użytkownik o tym loginie już istnieje. Wybierz inny login.\");}else{setError(\"Wystąpił nieoczekiwany błąd.\");}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AppBar,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"SignIn\"}),error!=\"\"?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning alert-dismissible fade show\",role:\"alert\",children:error}):null,/*#__PURE__*/_jsx(\"div\",{className:\"form-control form-control-sm\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignIn,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"user\",required:true,name:\"user\",className:\"form-control\",onChange:function onChange(e){setNewUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"user\",children:\"Username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"pwd\",required:true,name:\"pwd\",className:\"form-control\",onChange:function onChange(e){setNewPwd(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"pwd\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block mb-4\",children:\"Sign In\"})]})})]});};export default SignInPage;","map":{"version":3,"names":["React","useState","useNavigate","AppBar","SignInPage","newUsername","setNewUsername","newPwd","setNewPwd","error","setError","navigate","handleSignIn","event","preventDefault","newUser","username","pwd","fetch","method","body","JSON","stringify","headers","then","response","ok","status","e","target","value"],"sources":["C:/Users/magma/Downloads/Lab 4/Lab-4/library-fe/src/pages/SignInPage.tsx"],"sourcesContent":["import React, {useState} from 'react'\r\nimport {userDTO} from \"../data/userDTO\";\r\nimport {redirect} from \"react-router-dom\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AppBar from \"../components/AppBar\";\r\n\r\n\r\nconst SignInPage = () => {\r\n    const [newUsername, setNewUsername] = useState(\"\");\r\n    const [newPwd, setNewPwd] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    const handleSignIn = (event: React.FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n\r\n        const newUser: userDTO = {\r\n            username: newUsername,\r\n            pwd: newPwd\r\n        }\r\n\r\n        fetch(\"/user/registration\",\r\n            {method: \"POST\", body: JSON.stringify(newUser), headers: {'Content-Type': 'application/json'}})\r\n            .then(response => {\r\n                if(response.ok){\r\n                    navigate('/login');\r\n                } else if (response.status == 400){\r\n                    setError(\"Użytkownik o tym loginie już istnieje. Wybierz inny login.\")\r\n                } else {\r\n                    setError(\"Wystąpił nieoczekiwany błąd.\")\r\n                }\r\n            })\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <AppBar />\r\n            <h1>SignIn</h1>\r\n\r\n            {error != \"\" ?\r\n                <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\r\n                    {error}\r\n                </div> : null\r\n            }\r\n\r\n            <div className=\"form-control form-control-sm\">\r\n                <form onSubmit={handleSignIn}>\r\n\r\n                    <div className=\"form-outline mb-4\">\r\n                        <input type=\"text\" id=\"user\" required name=\"user\"\r\n                               className=\"form-control\"\r\n                               onChange={(e) => {\r\n                                   setNewUsername(e.target.value)\r\n                               }}/>\r\n                        <label className=\"form-label\" htmlFor=\"user\">Username</label>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"form-outline mb-4\">\r\n                        <input type=\"password\" id=\"pwd\" required name=\"pwd\"\r\n                               className=\"form-control\"\r\n                               onChange={(e) => {\r\n                                   setNewPwd(e.target.value)\r\n                               }}/>\r\n                        <label className=\"form-label\" htmlFor=\"pwd\">Password</label>\r\n                    </div>\r\n\r\n                    <button\r\n                        type = \"submit\"\r\n                        className = \"btn btn-primary btn-block mb-4\" >\r\n                        Sign In\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </>)\r\n}\r\n\r\nexport default SignInPage"],"mappings":"qIAAA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CAGrC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,OAAM,KAAM,sBAAsB,CAAC,6IAG1C,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CACrB,cAAsCH,QAAQ,CAAC,EAAE,CAAC,wCAA3CI,WAAW,eAAEC,cAAc,eAClC,eAA4BL,QAAQ,CAAC,EAAE,CAAC,yCAAjCM,MAAM,eAAEC,SAAS,eACxB,eAA0BP,QAAQ,CAAC,EAAE,CAAC,yCAA/BQ,KAAK,eAAEC,QAAQ,eACtB,GAAMC,SAAQ,CAAGT,WAAW,EAAE,CAE9B,GAAMU,aAAY,CAAG,QAAfA,aAAY,CAAIC,KAAuC,CAAK,CAC9DA,KAAK,CAACC,cAAc,EAAE,CAEtB,GAAMC,QAAgB,CAAG,CACrBC,QAAQ,CAAEX,WAAW,CACrBY,GAAG,CAAEV,MACT,CAAC,CAEDW,KAAK,CAAC,oBAAoB,CACtB,CAACC,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,OAAO,CAAC,CAAEQ,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAAC,CAAC,CAC9FC,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,EAAE,CAAC,CACXf,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,IAAM,IAAIc,QAAQ,CAACE,MAAM,EAAI,GAAG,CAAC,CAC9BjB,QAAQ,CAAC,4DAA4D,CAAC,CAC1E,CAAC,IAAM,CACHA,QAAQ,CAAC,8BAA8B,CAAC,CAC5C,CACJ,CAAC,CAAC,CACV,CAAC,CAED,mBACI,wCACI,KAAC,MAAM,IAAG,cACV,oBAAI,QAAM,EAAK,CAEdD,KAAK,EAAI,EAAE,cACR,YAAK,SAAS,CAAC,iDAAiD,CAAC,IAAI,CAAC,OAAO,UACxEA,KAAK,EACJ,CAAG,IAAI,cAGjB,YAAK,SAAS,CAAC,8BAA8B,uBACzC,cAAM,QAAQ,CAAEG,YAAa,wBAEzB,aAAK,SAAS,CAAC,mBAAmB,wBAC9B,cAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,MAAC,IAAI,CAAC,MAAM,CAC1C,SAAS,CAAC,cAAc,CACxB,QAAQ,CAAE,kBAACgB,CAAC,CAAK,CACbtB,cAAc,CAACsB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAClC,CAAE,EAAE,cACX,cAAO,SAAS,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,UAAC,UAAQ,EAAQ,GAC3D,cAGN,aAAK,SAAS,CAAC,mBAAmB,wBAC9B,cAAO,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,MAAC,IAAI,CAAC,KAAK,CAC5C,SAAS,CAAC,cAAc,CACxB,QAAQ,CAAE,kBAACF,CAAC,CAAK,CACbpB,SAAS,CAACoB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC7B,CAAE,EAAE,cACX,cAAO,SAAS,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,UAAC,UAAQ,EAAQ,GAC1D,cAEN,eACI,IAAI,CAAG,QAAQ,CACf,SAAS,CAAG,gCAAgC,UAAE,SAElD,EAAS,GACN,EACL,GACP,CACX,CAAC,CAED,cAAe1B,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}